<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign in</title>
    <link rel="stylesheet" href="main.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
      integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Merriweather:300,400,400i|Noto+Sans:400,400i,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600"
      rel="stylesheet"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  </head>
  <body>
    <div class="to">
      <div class="form">
        <h2>Đăng ký</h2>
        <label style="margin-left: -150px">Họ và tên</label>
        <input type="text" name="name" id="name" />
        <span id="nameError" class="error"></span>
        <label>Số điện thoại</label>
        <input type="text" name="phonenumber" id="phonenumber" />
        <span id="phonenumberError" class="error"></span>
        <label style="margin-left: -180px">Email</label>
        <input type="text" name="email" id="email" />
        <span id="emailError" class="error"></span>
        <div class="sex">
          <label style="margin-left: 1px">Giới tính</label>
          <input type="radio" name="sex" id="sex" value="male" />Nam
          <input type="radio" name="sex" id="sex" value="female" />Nữ
        </div>
        <label style="margin-left: -100px">Tên người dùng</label>
        <input type="text" name="nameuser" id="nameuser" />
        <span id="nameuserError" class="error"></span>
        <div class="form-pass">
          <label style="margin-left: 0px">Mật khẩu</label>
          <input type="password" name="password" id="password" />
          <span id="passwordError" class="error"></span>
          <label style="margin-left: 0px">Xác nhận mật khẩu</label>
          <input type="password" name="confirmpassword" id="confirmpassword" />
          <span id="confirmpasswordError" class="error"></span>
        </div>
        <input onclick="validateForm()" class="submit" type="submit" value="Đăng Ký" />
      </div>
    </div>
    <script>
      function validateForm() {
        let nameInput = document.getElementById("name").value;
        let emailInput = document.getElementById("email").value;
        let phoneNumberInput = document.getElementById("phonenumber").value;
        let sexInputs = document.getElementsByName("sex");
        let usernameInput = document.getElementById("nameuser").value;
        let passwordInput = document.getElementById("password").value;
        let confirmPasswordInput = document.getElementById("confirmpassword").value;

        // Xóa thông báo lỗi cũ
        clearErrors();

        // Kiểm tra tính hợp lệ của ô #name
        if (nameInput.trim() === "") {
          displayError("nameError", "Họ và tên không được bỏ trống.");
          return false;
        } else if (nameInput.length < 5) {
          displayError("nameError", "Họ và tên phải có ít nhất 5 ký tự.");
          return false;
        }

        // Kiểm tra tính hợp lệ của ô #phonenumber
        if (phoneNumberInput.trim() === "") {
          displayError("phonenumberError", "Số điện thoại không được bỏ trống.");
          return false;
        } else if (phoneNumberInput.length < 10 || phoneNumberInput.length > 12 || phoneNumberInput.charAt(0) !== "0") {
          displayError("phonenumber", "Số điện thoại không hợp lệ.");
          return false;
        };

        // Kiểm tra tính hợp lệ của ô #email
        if (emailInput.trim() === "") {
           displayError("emailError", "Email không được bỏ trống.");
           return false;
        } else if (!emailInput.includes("@") || !emailInput.includes(".com")) {
           displayError("emailError", "Email không hợp lệ.");
           return false;
         };

         // Kiểm tra tính hợp lệ của ô #sex
        var selectedSex = false;
        for (var i = 0; i < sexInputs.length; i++) {
          if (sexInputs[i].checked) {
            selectedSex = true;
            break;
          }
        }
        if (!selectedSex) {
          displayError("sexError", "Vui lòng chọn giới tính.");
          return false;
        }
      
        // Kiểm tra tính hợp lệ của ô #nameuser
        if (usernameInput.trim() === "") {
          displayError("nameuserError", "");
          return false;
        } else if (usernameInput.length < 6) {
          displayError("nameuserError", "Tên người dùng phải có ít nhất 6 ký tự.");
          return false;
        }

        // Kiểm tra tính hợp lệ của ô #password
        if (passwordInput.trim() === "") {
          displayError("passwordError", "Mật khẩu phải có ít nhất 8 ký tự.");
          return false;
        } else if(passwordInput.length < 8 || !/[A-Z]/.test(passwordInput) || !/[a-z]/.test(passwordInput) || !/[@#$&]/.test(passwordInput) || !/\d/.test(passwordInput)) {
          displayError("passwordError", "Mật khẩu không đáp ứng yêu cầu bảo mật. Mật khẩu phải có chứa ít nhất 8 ký tự, chứa ít nhất 1 ký tự viết hoa, 1 ký tự viết thường, 1 ký tự đặt biệt trong dãy (@#$&) và 1 ký tự số.");
        }

        // Kiểm tra tính hợp lệ của ô #confirmpassword
        if (confirmPasswordInput !== passwordInput) {
          displayError("confirmpasswordError", "Mật khẩu xác nhận không khớp.");
          return false;
        }

        // nếu tất cả hợp lệ thì hiện alert dk thành công
        alert(" Chúc mừng bạn đả đăng ký thành công!");
        return true;
      }

      function displayError(elementId, errorMessage) {
      var errorElement = document.getElementById(elementId);
      errorElement.innerText = errorMessage;
      errorElement.style.display = "block";
      errorElement.style.color = "red";
      errorElement.style.marginTop = "5px";
      errorElement.style.fontSize = "14px";

  // Tìm ô input tương ứng
      var inputElement = document.getElementById(elementId.replace("Error", ""));
       if (inputElement) {
       inputElement.classList.add("error-input");
       }
}

      function clearErrors() {
        var errorElements = document.getElementsByClassName("error");
        for (var i = 0; i < errorElements.length; i++) {
          errorElements[i].innerText = "";
          errorElements[i].style.display = "none";
        }
      }
    </script>
  </body>
</html>
